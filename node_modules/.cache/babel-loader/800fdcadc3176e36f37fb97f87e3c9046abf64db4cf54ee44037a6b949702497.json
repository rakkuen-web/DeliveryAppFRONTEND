{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\LENOVO LEGION 7\\\\delivery-connect\\\\frontend\\\\src\\\\components\\\\LocationSelector.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LocationSelector = ({\n  onLocationSelect,\n  pickupLocation,\n  deliveryLocation,\n  mode = 'pickup'\n}) => {\n  _s();\n  const mapRef = useRef(null);\n  const [map, setMap] = useState(null);\n  const [marker, setMarker] = useState(null);\n  useEffect(() => {\n    initMap();\n    autoGetLocation();\n  }, []);\n  const autoGetLocation = () => {\n    navigator.geolocation.getCurrentPosition(position => {\n      const location = {\n        latitude: position.coords.latitude,\n        longitude: position.coords.longitude,\n        address: `${position.coords.latitude.toFixed(4)}, ${position.coords.longitude.toFixed(4)}`\n      };\n      onLocationSelect(mode, location);\n    }, () => {\n      // If GPS fails, use default Marrakech location\n      const defaultLocation = {\n        latitude: 31.6295,\n        longitude: -7.9811,\n        address: 'Marrakech, Morocco'\n      };\n      onLocationSelect(mode, defaultLocation);\n    }, {\n      enableHighAccuracy: true,\n      timeout: 15000,\n      maximumAge: 0\n    });\n  };\n  useEffect(() => {\n    if (map && (pickupLocation || deliveryLocation)) {\n      updateMarker(pickupLocation || deliveryLocation);\n    }\n  }, [map, pickupLocation, deliveryLocation]);\n  const initMap = () => {\n    if (!mapRef.current || !window.L || map) return;\n    const leafletMap = window.L.map(mapRef.current, {\n      zoomControl: false,\n      attributionControl: false\n    }).setView([31.6295, -7.9811], 25);\n    window.L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {\n      attribution: '¬© OpenStreetMap contributors ¬© CARTO',\n      subdomains: 'abcd',\n      maxZoom: 25\n    }).addTo(leafletMap);\n    leafletMap.on('click', e => {\n      const {\n        lat,\n        lng\n      } = e.latlng;\n      onLocationSelect(mode, {\n        latitude: lat,\n        longitude: lng,\n        address: `${lat.toFixed(4)}, ${lng.toFixed(4)}`\n      });\n    });\n    setMap(leafletMap);\n  };\n  const updateMarker = location => {\n    if (!map || !(location !== null && location !== void 0 && location.latitude)) return;\n    if (marker) {\n      map.removeLayer(marker);\n    }\n    const icon = mode === 'home' ? 'üè†' : 'üìç';\n    const newMarker = window.L.marker([location.latitude, location.longitude], {\n      icon: window.L.divIcon({\n        html: `<div style=\"font-size: 24px; text-align: center;\">${icon}</div>`,\n        className: 'custom-marker',\n        iconSize: [30, 30],\n        iconAnchor: [15, 15]\n      })\n    }).addTo(map);\n    setMarker(newMarker);\n    map.setView([location.latitude, location.longitude], 25);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [mode === 'home' && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: '10px',\n        textAlign: 'center'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          color: '#4CAF50',\n          fontWeight: 'bold'\n        },\n        children: \"\\uD83C\\uDFE0 Set Home Address\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }, this), mode === 'delivery' && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: '10px',\n        textAlign: 'center'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          color: '#333',\n          fontWeight: 'bold'\n        },\n        children: \"\\uD83D\\uDCCD Set Delivery Location\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: mapRef,\n      style: {\n        width: '100%',\n        height: '250px',\n        borderRadius: '15px',\n        border: '2px solid #e0e0e0'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        fontSize: '12px',\n        color: '#666',\n        margin: '5px 0'\n      },\n      children: [\"Click anywhere on the map to set \", mode, \" location\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 5\n  }, this);\n};\n_s(LocationSelector, \"ij9EvDz+tZLJp9F85qIYh/ZEiE0=\");\n_c = LocationSelector;\nexport default LocationSelector;\nvar _c;\n$RefreshReg$(_c, \"LocationSelector\");","map":{"version":3,"names":["React","useState","useEffect","useRef","jsxDEV","_jsxDEV","LocationSelector","onLocationSelect","pickupLocation","deliveryLocation","mode","_s","mapRef","map","setMap","marker","setMarker","initMap","autoGetLocation","navigator","geolocation","getCurrentPosition","position","location","latitude","coords","longitude","address","toFixed","defaultLocation","enableHighAccuracy","timeout","maximumAge","updateMarker","current","window","L","leafletMap","zoomControl","attributionControl","setView","tileLayer","attribution","subdomains","maxZoom","addTo","on","e","lat","lng","latlng","removeLayer","icon","newMarker","divIcon","html","className","iconSize","iconAnchor","children","style","marginBottom","textAlign","color","fontWeight","fileName","_jsxFileName","lineNumber","columnNumber","ref","width","height","borderRadius","border","fontSize","margin","_c","$RefreshReg$"],"sources":["C:/Users/LENOVO LEGION 7/delivery-connect/frontend/src/components/LocationSelector.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\n\nconst LocationSelector = ({ onLocationSelect, pickupLocation, deliveryLocation, mode = 'pickup' }) => {\n  const mapRef = useRef(null);\n  const [map, setMap] = useState(null);\n  const [marker, setMarker] = useState(null);\n\n  useEffect(() => {\n    initMap();\n    autoGetLocation();\n  }, []);\n\n  const autoGetLocation = () => {\n    navigator.geolocation.getCurrentPosition(\n      (position) => {\n        const location = {\n          latitude: position.coords.latitude,\n          longitude: position.coords.longitude,\n          address: `${position.coords.latitude.toFixed(4)}, ${position.coords.longitude.toFixed(4)}`\n        };\n        onLocationSelect(mode, location);\n      },\n      () => {\n        // If GPS fails, use default Marrakech location\n        const defaultLocation = {\n          latitude: 31.6295,\n          longitude: -7.9811,\n          address: 'Marrakech, Morocco'\n        };\n        onLocationSelect(mode, defaultLocation);\n      },\n      { enableHighAccuracy: true, timeout: 15000, maximumAge: 0 }\n    );\n  };\n\n  useEffect(() => {\n    if (map && (pickupLocation || deliveryLocation)) {\n      updateMarker(pickupLocation || deliveryLocation);\n    }\n  }, [map, pickupLocation, deliveryLocation]);\n\n  const initMap = () => {\n    if (!mapRef.current || !window.L || map) return;\n    \n    const leafletMap = window.L.map(mapRef.current, {\n      zoomControl: false,\n      attributionControl: false\n    }).setView([31.6295, -7.9811], 25);\n    \n    window.L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {\n      attribution: '¬© OpenStreetMap contributors ¬© CARTO',\n      subdomains: 'abcd',\n      maxZoom: 25\n    }).addTo(leafletMap);\n    \n    leafletMap.on('click', (e) => {\n      const { lat, lng } = e.latlng;\n      onLocationSelect(mode, {\n        latitude: lat,\n        longitude: lng,\n        address: `${lat.toFixed(4)}, ${lng.toFixed(4)}`\n      });\n    });\n    \n    setMap(leafletMap);\n  };\n\n  const updateMarker = (location) => {\n    if (!map || !location?.latitude) return;\n    \n    if (marker) {\n      map.removeLayer(marker);\n    }\n    \n    const icon = mode === 'home' ? 'üè†' : 'üìç';\n    const newMarker = window.L.marker([location.latitude, location.longitude], {\n      icon: window.L.divIcon({\n        html: `<div style=\"font-size: 24px; text-align: center;\">${icon}</div>`,\n        className: 'custom-marker',\n        iconSize: [30, 30],\n        iconAnchor: [15, 15]\n      })\n    }).addTo(map);\n    \n    setMarker(newMarker);\n    map.setView([location.latitude, location.longitude], 25);\n  };\n\n  return (\n    <div>\n      {mode === 'home' && (\n        <div style={{ marginBottom: '10px', textAlign: 'center' }}>\n          <span style={{ color: '#4CAF50', fontWeight: 'bold' }}>üè† Set Home Address</span>\n        </div>\n      )}\n      {mode === 'delivery' && (\n        <div style={{ marginBottom: '10px', textAlign: 'center' }}>\n          <span style={{ color: '#333', fontWeight: 'bold' }}>üìç Set Delivery Location</span>\n        </div>\n      )}\n      \n      <div \n        ref={mapRef}\n        style={{ \n          width: '100%', \n          height: '250px', \n          borderRadius: '15px',\n          border: '2px solid #e0e0e0'\n        }}\n      />\n      \n      <p style={{ fontSize: '12px', color: '#666', margin: '5px 0' }}>\n        Click anywhere on the map to set {mode} location\n      </p>\n    </div>\n  );\n};\n\nexport default LocationSelector;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}