{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\LENOVO LEGION 7\\\\delivery-connect\\\\frontend\\\\src\\\\components\\\\DriverLocationSharer.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { LocationTracker } from '../utils/locationTracker';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DriverLocationSharer = ({\n  user,\n  activeDelivery\n}) => {\n  _s();\n  const [locationTracker, setLocationTracker] = useState(null);\n  const [isSharing, setIsSharing] = useState(false);\n  const [currentLocation, setCurrentLocation] = useState(null);\n  useEffect(() => {\n    if ((user === null || user === void 0 ? void 0 : user.userType) === 'driver' && activeDelivery) {\n      const tracker = new LocationTracker(user._id);\n      setLocationTracker(tracker);\n      startLocationSharing(tracker);\n      return () => {\n        if (tracker) {\n          tracker.stopTracking();\n        }\n      };\n    }\n  }, [user, activeDelivery]);\n  const startLocationSharing = tracker => {\n    setIsSharing(true);\n    tracker.startTracking();\n\n    // Get initial location\n    navigator.geolocation.getCurrentPosition(position => {\n      const location = {\n        latitude: position.coords.latitude,\n        longitude: position.coords.longitude,\n        address: `${position.coords.latitude.toFixed(4)}, ${position.coords.longitude.toFixed(4)}`,\n        accuracy: position.coords.accuracy\n      };\n      setCurrentLocation(location);\n    }, error => {\n      console.error('GPS Error:', error);\n      // Fallback to Casablanca coordinates\n      const fallbackLocation = {\n        latitude: 33.5731,\n        longitude: -7.5898,\n        address: 'Casablanca, Morocco',\n        accuracy: 1000\n      };\n      setCurrentLocation(fallbackLocation);\n    }, {\n      enableHighAccuracy: true,\n      timeout: 10000,\n      maximumAge: 0\n    });\n  };\n  const stopLocationSharing = () => {\n    setIsSharing(false);\n    if (locationTracker) {\n      locationTracker.stopTracking();\n    }\n  };\n  if ((user === null || user === void 0 ? void 0 : user.userType) !== 'driver' || !activeDelivery) {\n    return null;\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      background: isSharing ? 'linear-gradient(135deg, #4CAF50 0%, #45a049 100%)' : 'linear-gradient(135deg, #FF9800 0%, #f57c00 100%)',\n      color: 'white',\n      padding: '15px',\n      borderRadius: '15px',\n      margin: '10px 0',\n      textAlign: 'center',\n      boxShadow: '0 4px 15px rgba(0,0,0,0.2)'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        fontSize: '18px',\n        fontWeight: 'bold',\n        marginBottom: '8px'\n      },\n      children: [\"\\uD83D\\uDCCD Live Tracking: \", isSharing ? 'ACTIVE' : 'INACTIVE']\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), currentLocation && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        fontSize: '13px',\n        opacity: 0.9,\n        marginBottom: '5px'\n      },\n      children: [\"\\uD83D\\uDCCD \", currentLocation.address]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        fontSize: '12px',\n        opacity: 0.8\n      },\n      children: isSharing ? 'Customer is tracking your location' : 'Location sharing disabled'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this), (currentLocation === null || currentLocation === void 0 ? void 0 : currentLocation.accuracy) && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        fontSize: '11px',\n        opacity: 0.7,\n        marginTop: '5px'\n      },\n      children: [\"Accuracy: \\xB1\", Math.round(currentLocation.accuracy), \"m\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this);\n};\n_s(DriverLocationSharer, \"2ZyZkVs9BJ7nTTRlShTWf47J3G0=\");\n_c = DriverLocationSharer;\nexport default DriverLocationSharer;\nvar _c;\n$RefreshReg$(_c, \"DriverLocationSharer\");","map":{"version":3,"names":["React","useEffect","useState","LocationTracker","jsxDEV","_jsxDEV","DriverLocationSharer","user","activeDelivery","_s","locationTracker","setLocationTracker","isSharing","setIsSharing","currentLocation","setCurrentLocation","userType","tracker","_id","startLocationSharing","stopTracking","startTracking","navigator","geolocation","getCurrentPosition","position","location","latitude","coords","longitude","address","toFixed","accuracy","error","console","fallbackLocation","enableHighAccuracy","timeout","maximumAge","stopLocationSharing","style","background","color","padding","borderRadius","margin","textAlign","boxShadow","children","fontSize","fontWeight","marginBottom","fileName","_jsxFileName","lineNumber","columnNumber","opacity","marginTop","Math","round","_c","$RefreshReg$"],"sources":["C:/Users/LENOVO LEGION 7/delivery-connect/frontend/src/components/DriverLocationSharer.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { LocationTracker } from '../utils/locationTracker';\n\nconst DriverLocationSharer = ({ user, activeDelivery }) => {\n  const [locationTracker, setLocationTracker] = useState(null);\n  const [isSharing, setIsSharing] = useState(false);\n  const [currentLocation, setCurrentLocation] = useState(null);\n\n  useEffect(() => {\n    if (user?.userType === 'driver' && activeDelivery) {\n      const tracker = new LocationTracker(user._id);\n      setLocationTracker(tracker);\n      startLocationSharing(tracker);\n\n      return () => {\n        if (tracker) {\n          tracker.stopTracking();\n        }\n      };\n    }\n  }, [user, activeDelivery]);\n\n  const startLocationSharing = (tracker) => {\n    setIsSharing(true);\n    tracker.startTracking();\n    \n    // Get initial location\n    navigator.geolocation.getCurrentPosition(\n      (position) => {\n        const location = {\n          latitude: position.coords.latitude,\n          longitude: position.coords.longitude,\n          address: `${position.coords.latitude.toFixed(4)}, ${position.coords.longitude.toFixed(4)}`,\n          accuracy: position.coords.accuracy\n        };\n        setCurrentLocation(location);\n      },\n      (error) => {\n        console.error('GPS Error:', error);\n        // Fallback to Casablanca coordinates\n        const fallbackLocation = {\n          latitude: 33.5731,\n          longitude: -7.5898,\n          address: 'Casablanca, Morocco',\n          accuracy: 1000\n        };\n        setCurrentLocation(fallbackLocation);\n      },\n      { enableHighAccuracy: true, timeout: 10000, maximumAge: 0 }\n    );\n  };\n\n  const stopLocationSharing = () => {\n    setIsSharing(false);\n    if (locationTracker) {\n      locationTracker.stopTracking();\n    }\n  };\n\n  if (user?.userType !== 'driver' || !activeDelivery) {\n    return null;\n  }\n\n  return (\n    <div style={{\n      background: isSharing ? 'linear-gradient(135deg, #4CAF50 0%, #45a049 100%)' : 'linear-gradient(135deg, #FF9800 0%, #f57c00 100%)',\n      color: 'white',\n      padding: '15px',\n      borderRadius: '15px',\n      margin: '10px 0',\n      textAlign: 'center',\n      boxShadow: '0 4px 15px rgba(0,0,0,0.2)'\n    }}>\n      <div style={{ fontSize: '18px', fontWeight: 'bold', marginBottom: '8px' }}>\n        üìç Live Tracking: {isSharing ? 'ACTIVE' : 'INACTIVE'}\n      </div>\n      {currentLocation && (\n        <div style={{ fontSize: '13px', opacity: 0.9, marginBottom: '5px' }}>\n          üìç {currentLocation.address}\n        </div>\n      )}\n      <div style={{ fontSize: '12px', opacity: 0.8 }}>\n        {isSharing ? 'Customer is tracking your location' : 'Location sharing disabled'}\n      </div>\n      {currentLocation?.accuracy && (\n        <div style={{ fontSize: '11px', opacity: 0.7, marginTop: '5px' }}>\n          Accuracy: ¬±{Math.round(currentLocation.accuracy)}m\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default DriverLocationSharer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}