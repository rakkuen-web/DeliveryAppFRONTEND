{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\LENOVO LEGION 7\\\\delivery-connect\\\\frontend\\\\src\\\\components\\\\DriverLocationSharer.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport io from 'socket.io-client';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DriverLocationSharer = ({\n  user,\n  activeDelivery\n}) => {\n  _s();\n  const [socket, setSocket] = useState(null);\n  const [isSharing, setIsSharing] = useState(false);\n  const [currentLocation, setCurrentLocation] = useState(null);\n  useEffect(() => {\n    if ((user === null || user === void 0 ? void 0 : user.userType) === 'driver' && activeDelivery) {\n      const newSocket = io('http://192.168.1.227:5000');\n      setSocket(newSocket);\n      startLocationSharing(newSocket);\n      return () => {\n        newSocket.disconnect();\n        stopLocationSharing();\n      };\n    }\n  }, [user, activeDelivery]);\n  const startLocationSharing = socketConnection => {\n    // Use mock location for testing since geolocation requires HTTPS\n    setIsSharing(true);\n    const mockLocation = {\n      latitude: 33.5731 + (Math.random() - 0.5) * 0.01,\n      longitude: -7.5898 + (Math.random() - 0.5) * 0.01,\n      address: `Moving towards you...`,\n      accuracy: 10\n    };\n    setCurrentLocation(mockLocation);\n\n    // Send initial location\n    if (socketConnection && activeDelivery) {\n      console.log('üìç Sending mock driver location:', mockLocation);\n      socketConnection.emit('driver-location', {\n        driverId: user._id,\n        requestId: activeDelivery._id,\n        location: mockLocation,\n        timestamp: new Date().toISOString()\n      });\n    }\n\n    // Simulate movement every 5 seconds\n    const interval = setInterval(() => {\n      const newLocation = {\n        latitude: mockLocation.latitude + (Math.random() - 0.5) * 0.001,\n        longitude: mockLocation.longitude + (Math.random() - 0.5) * 0.001,\n        address: `Moving towards you...`,\n        accuracy: 10\n      };\n      setCurrentLocation(newLocation);\n      if (socketConnection && activeDelivery) {\n        console.log('üìç Sending updated mock location:', newLocation);\n        socketConnection.emit('driver-location', {\n          driverId: user._id,\n          requestId: activeDelivery._id,\n          location: newLocation,\n          timestamp: new Date().toISOString()\n        });\n      }\n    }, 5000);\n    return () => {\n      clearInterval(interval);\n      setIsSharing(false);\n    };\n  };\n  const stopLocationSharing = () => {\n    setIsSharing(false);\n  };\n  if ((user === null || user === void 0 ? void 0 : user.userType) !== 'driver' || !activeDelivery) {\n    return null;\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      background: isSharing ? '#4CAF50' : '#FF9800',\n      color: 'white',\n      padding: '10px',\n      borderRadius: '8px',\n      margin: '10px 0',\n      textAlign: 'center'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        fontSize: '16px',\n        fontWeight: 'bold',\n        marginBottom: '5px'\n      },\n      children: [\"\\uD83D\\uDCCD Location Sharing: \", isSharing ? 'ON' : 'OFF']\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), currentLocation && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        fontSize: '12px',\n        opacity: 0.9\n      },\n      children: currentLocation.address\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        fontSize: '11px',\n        opacity: 0.8,\n        marginTop: '5px'\n      },\n      children: \"Customer can see your live location\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 5\n  }, this);\n};\n_s(DriverLocationSharer, \"23c97rPX+11J6buijaq8CuCJuzE=\");\n_c = DriverLocationSharer;\nexport default DriverLocationSharer;\nvar _c;\n$RefreshReg$(_c, \"DriverLocationSharer\");","map":{"version":3,"names":["React","useEffect","useState","io","jsxDEV","_jsxDEV","DriverLocationSharer","user","activeDelivery","_s","socket","setSocket","isSharing","setIsSharing","currentLocation","setCurrentLocation","userType","newSocket","startLocationSharing","disconnect","stopLocationSharing","socketConnection","mockLocation","latitude","Math","random","longitude","address","accuracy","console","log","emit","driverId","_id","requestId","location","timestamp","Date","toISOString","interval","setInterval","newLocation","clearInterval","style","background","color","padding","borderRadius","margin","textAlign","children","fontSize","fontWeight","marginBottom","fileName","_jsxFileName","lineNumber","columnNumber","opacity","marginTop","_c","$RefreshReg$"],"sources":["C:/Users/LENOVO LEGION 7/delivery-connect/frontend/src/components/DriverLocationSharer.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport io from 'socket.io-client';\n\nconst DriverLocationSharer = ({ user, activeDelivery }) => {\n  const [socket, setSocket] = useState(null);\n  const [isSharing, setIsSharing] = useState(false);\n  const [currentLocation, setCurrentLocation] = useState(null);\n\n  useEffect(() => {\n    if (user?.userType === 'driver' && activeDelivery) {\n      const newSocket = io('http://192.168.1.227:5000');\n      setSocket(newSocket);\n      startLocationSharing(newSocket);\n\n      return () => {\n        newSocket.disconnect();\n        stopLocationSharing();\n      };\n    }\n  }, [user, activeDelivery]);\n\n  const startLocationSharing = (socketConnection) => {\n    // Use mock location for testing since geolocation requires HTTPS\n    setIsSharing(true);\n    \n    const mockLocation = {\n      latitude: 33.5731 + (Math.random() - 0.5) * 0.01,\n      longitude: -7.5898 + (Math.random() - 0.5) * 0.01,\n      address: `Moving towards you...`,\n      accuracy: 10\n    };\n    \n    setCurrentLocation(mockLocation);\n    \n    // Send initial location\n    if (socketConnection && activeDelivery) {\n      console.log('üìç Sending mock driver location:', mockLocation);\n      socketConnection.emit('driver-location', {\n        driverId: user._id,\n        requestId: activeDelivery._id,\n        location: mockLocation,\n        timestamp: new Date().toISOString()\n      });\n    }\n    \n    // Simulate movement every 5 seconds\n    const interval = setInterval(() => {\n      const newLocation = {\n        latitude: mockLocation.latitude + (Math.random() - 0.5) * 0.001,\n        longitude: mockLocation.longitude + (Math.random() - 0.5) * 0.001,\n        address: `Moving towards you...`,\n        accuracy: 10\n      };\n      \n      setCurrentLocation(newLocation);\n      \n      if (socketConnection && activeDelivery) {\n        console.log('üìç Sending updated mock location:', newLocation);\n        socketConnection.emit('driver-location', {\n          driverId: user._id,\n          requestId: activeDelivery._id,\n          location: newLocation,\n          timestamp: new Date().toISOString()\n        });\n      }\n    }, 5000);\n    \n    return () => {\n      clearInterval(interval);\n      setIsSharing(false);\n    };\n  };\n\n  const stopLocationSharing = () => {\n    setIsSharing(false);\n  };\n\n  if (user?.userType !== 'driver' || !activeDelivery) {\n    return null;\n  }\n\n  return (\n    <div style={{\n      background: isSharing ? '#4CAF50' : '#FF9800',\n      color: 'white',\n      padding: '10px',\n      borderRadius: '8px',\n      margin: '10px 0',\n      textAlign: 'center'\n    }}>\n      <div style={{ fontSize: '16px', fontWeight: 'bold', marginBottom: '5px' }}>\n        üìç Location Sharing: {isSharing ? 'ON' : 'OFF'}\n      </div>\n      {currentLocation && (\n        <div style={{ fontSize: '12px', opacity: 0.9 }}>\n          {currentLocation.address}\n        </div>\n      )}\n      <div style={{ fontSize: '11px', opacity: 0.8, marginTop: '5px' }}>\n        Customer can see your live location\n      </div>\n    </div>\n  );\n};\n\nexport default DriverLocationSharer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}