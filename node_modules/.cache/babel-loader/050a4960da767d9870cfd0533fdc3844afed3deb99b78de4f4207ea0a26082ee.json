{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\LENOVO LEGION 7\\\\delivery-connect\\\\frontend\\\\src\\\\components\\\\LiveTrackingMap.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport io from 'socket.io-client';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LiveTrackingMap = ({\n  request,\n  user\n}) => {\n  _s();\n  const mapRef = useRef(null);\n  const [map, setMap] = useState(null);\n  const [driverMarker, setDriverMarker] = useState(null);\n  const [pickupMarker, setPickupMarker] = useState(null);\n  const [deliveryMarker, setDeliveryMarker] = useState(null);\n  const [socket, setSocket] = useState(null);\n  useEffect(() => {\n    // Initialize socket connection\n    const newSocket = io('http://localhost:5000');\n    setSocket(newSocket);\n\n    // Join room for this request\n    newSocket.emit('join-room', request._id);\n\n    // Listen for driver location updates\n    newSocket.on('driver-location-update', data => {\n      if (data.requestId === request._id) {\n        updateDriverLocation(data.location);\n      }\n    });\n    return () => {\n      newSocket.disconnect();\n    };\n  }, [request._id]);\n  useEffect(() => {\n    initializeMap();\n  }, []);\n  const initializeMap = () => {\n    var _request$driverId, _request$driverId$nam, _request$driverId2, _request$driverId3, _request$driverId3$ra;\n    // For now, use a simple map placeholder\n    // In production, you'd use Google Maps API\n    const mapContainer = mapRef.current;\n\n    // Create a simple visual map\n    mapContainer.innerHTML = `\n      <div style=\"\n        width: 100%;\n        height: 100%;\n        background: linear-gradient(45deg, #e8f5e8 25%, transparent 25%), \n                    linear-gradient(-45deg, #e8f5e8 25%, transparent 25%), \n                    linear-gradient(45deg, transparent 75%, #e8f5e8 75%), \n                    linear-gradient(-45deg, transparent 75%, #e8f5e8 75%);\n        background-size: 20px 20px;\n        background-position: 0 0, 0 10px, 10px -10px, -10px 0px;\n        position: relative;\n        border-radius: 15px;\n        overflow: hidden;\n      \">\n        <div id=\"pickup-marker\" style=\"\n          position: absolute;\n          top: 30%;\n          left: 20%;\n          width: 30px;\n          height: 30px;\n          background: #4CAF50;\n          border-radius: 50%;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: white;\n          font-weight: bold;\n          box-shadow: 0 2px 10px rgba(0,0,0,0.3);\n          z-index: 2;\n        \">üìç</div>\n        \n        <div id=\"delivery-marker\" style=\"\n          position: absolute;\n          top: 70%;\n          right: 20%;\n          width: 30px;\n          height: 30px;\n          background: #333;\n          border-radius: 50%;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: white;\n          font-weight: bold;\n          box-shadow: 0 2px 10px rgba(0,0,0,0.3);\n          z-index: 2;\n        \">üè†</div>\n        \n        <div id=\"driver-marker\" style=\"\n          position: absolute;\n          top: 50%;\n          left: 50%;\n          width: 40px;\n          height: 40px;\n          background: #FF5722;\n          border-radius: 50%;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: white;\n          font-weight: bold;\n          box-shadow: 0 4px 15px rgba(255,87,34,0.4);\n          z-index: 3;\n          animation: pulse 2s infinite;\n        \">üöó</div>\n        \n        <div style=\"\n          position: absolute;\n          top: 10px;\n          left: 10px;\n          background: rgba(255,255,255,0.9);\n          padding: 10px;\n          border-radius: 8px;\n          font-size: 12px;\n          box-shadow: 0 2px 10px rgba(0,0,0,0.1);\n        \">\n          <div style=\"margin-bottom: 5px;\">\n            <span style=\"color: #4CAF50;\">‚óè</span> Pickup: ${request.pickupLocation.address}\n          </div>\n          <div>\n            <span style=\"color: #333;\">‚óè</span> Delivery: ${request.deliveryLocation.address}\n          </div>\n        </div>\n        \n        <div id=\"driver-info\" style=\"\n          position: absolute;\n          bottom: 10px;\n          left: 10px;\n          right: 10px;\n          background: rgba(255,255,255,0.95);\n          padding: 15px;\n          border-radius: 10px;\n          box-shadow: 0 4px 15px rgba(0,0,0,0.1);\n        \">\n          <div style=\"display: flex; align-items: center; gap: 10px;\">\n            <div style=\"\n              width: 40px;\n              height: 40px;\n              background: #4CAF50;\n              border-radius: 50%;\n              display: flex;\n              align-items: center;\n              justify-content: center;\n              color: white;\n              font-weight: bold;\n            \">${((_request$driverId = request.driverId) === null || _request$driverId === void 0 ? void 0 : (_request$driverId$nam = _request$driverId.name) === null || _request$driverId$nam === void 0 ? void 0 : _request$driverId$nam.charAt(0)) || 'D'}</div>\n            <div style=\"flex: 1;\">\n              <div style=\"font-weight: bold; margin-bottom: 2px;\">${((_request$driverId2 = request.driverId) === null || _request$driverId2 === void 0 ? void 0 : _request$driverId2.name) || 'Driver'}</div>\n              <div style=\"color: #666; font-size: 12px;\">\n                ${getStatusMessage(request.status)} ‚Ä¢ ‚≠ê ${((_request$driverId3 = request.driverId) === null || _request$driverId3 === void 0 ? void 0 : (_request$driverId3$ra = _request$driverId3.rating) === null || _request$driverId3$ra === void 0 ? void 0 : _request$driverId3$ra.toFixed(1)) || '5.0'}\n              </div>\n            </div>\n            <div style=\"text-align: right;\">\n              <div style=\"font-size: 18px; font-weight: bold; color: #4CAF50;\">${request.price} MAD</div>\n              <div style=\"font-size: 12px; color: #666;\">\n                ${request.status === 'delivering' ? 'Arriving' : 'Fee'}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      <style>\n        @keyframes pulse {\n          0% { transform: scale(1); }\n          50% { transform: scale(1.1); }\n          100% { transform: scale(1); }\n        }\n      </style>\n    `;\n  };\n  const updateDriverLocation = location => {\n    const driverMarker = document.getElementById('driver-marker');\n    if (driverMarker && location) {\n      // Simulate movement on the visual map\n      const randomX = Math.random() * 80 + 10; // 10% to 90%\n      const randomY = Math.random() * 80 + 10; // 10% to 90%\n\n      driverMarker.style.left = randomX + '%';\n      driverMarker.style.top = randomY + '%';\n\n      // Add movement animation\n      driverMarker.style.transition = 'all 1s ease-in-out';\n      console.log('üöó Driver location updated:', location);\n    }\n  };\n  const getStatusMessage = status => {\n    const messages = {\n      pending: 'Looking for driver...',\n      accepted: 'Going to store',\n      shopping: 'Shopping for items',\n      delivering: 'On the way to you',\n      completed: 'Delivered!',\n      cancelled: 'Cancelled'\n    };\n    return messages[status] || status;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: mapRef,\n    style: {\n      width: '100%',\n      height: '400px',\n      border: '2px solid #e0e0e0',\n      borderRadius: '15px',\n      position: 'relative',\n      overflow: 'hidden'\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 204,\n    columnNumber: 5\n  }, this);\n};\n_s(LiveTrackingMap, \"AEqLSyvr8LJbGwg7S9jJUQTe9Z4=\");\n_c = LiveTrackingMap;\nexport default LiveTrackingMap;\nvar _c;\n$RefreshReg$(_c, \"LiveTrackingMap\");","map":{"version":3,"names":["React","useEffect","useRef","useState","io","jsxDEV","_jsxDEV","LiveTrackingMap","request","user","_s","mapRef","map","setMap","driverMarker","setDriverMarker","pickupMarker","setPickupMarker","deliveryMarker","setDeliveryMarker","socket","setSocket","newSocket","emit","_id","on","data","requestId","updateDriverLocation","location","disconnect","initializeMap","_request$driverId","_request$driverId$nam","_request$driverId2","_request$driverId3","_request$driverId3$ra","mapContainer","current","innerHTML","pickupLocation","address","deliveryLocation","driverId","name","charAt","getStatusMessage","status","rating","toFixed","price","document","getElementById","randomX","Math","random","randomY","style","left","top","transition","console","log","messages","pending","accepted","shopping","delivering","completed","cancelled","ref","width","height","border","borderRadius","position","overflow","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/LENOVO LEGION 7/delivery-connect/frontend/src/components/LiveTrackingMap.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport io from 'socket.io-client';\n\nconst LiveTrackingMap = ({ request, user }) => {\n  const mapRef = useRef(null);\n  const [map, setMap] = useState(null);\n  const [driverMarker, setDriverMarker] = useState(null);\n  const [pickupMarker, setPickupMarker] = useState(null);\n  const [deliveryMarker, setDeliveryMarker] = useState(null);\n  const [socket, setSocket] = useState(null);\n\n  useEffect(() => {\n    // Initialize socket connection\n    const newSocket = io('http://localhost:5000');\n    setSocket(newSocket);\n\n    // Join room for this request\n    newSocket.emit('join-room', request._id);\n\n    // Listen for driver location updates\n    newSocket.on('driver-location-update', (data) => {\n      if (data.requestId === request._id) {\n        updateDriverLocation(data.location);\n      }\n    });\n\n    return () => {\n      newSocket.disconnect();\n    };\n  }, [request._id]);\n\n  useEffect(() => {\n    initializeMap();\n  }, []);\n\n  const initializeMap = () => {\n    // For now, use a simple map placeholder\n    // In production, you'd use Google Maps API\n    const mapContainer = mapRef.current;\n    \n    // Create a simple visual map\n    mapContainer.innerHTML = `\n      <div style=\"\n        width: 100%;\n        height: 100%;\n        background: linear-gradient(45deg, #e8f5e8 25%, transparent 25%), \n                    linear-gradient(-45deg, #e8f5e8 25%, transparent 25%), \n                    linear-gradient(45deg, transparent 75%, #e8f5e8 75%), \n                    linear-gradient(-45deg, transparent 75%, #e8f5e8 75%);\n        background-size: 20px 20px;\n        background-position: 0 0, 0 10px, 10px -10px, -10px 0px;\n        position: relative;\n        border-radius: 15px;\n        overflow: hidden;\n      \">\n        <div id=\"pickup-marker\" style=\"\n          position: absolute;\n          top: 30%;\n          left: 20%;\n          width: 30px;\n          height: 30px;\n          background: #4CAF50;\n          border-radius: 50%;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: white;\n          font-weight: bold;\n          box-shadow: 0 2px 10px rgba(0,0,0,0.3);\n          z-index: 2;\n        \">üìç</div>\n        \n        <div id=\"delivery-marker\" style=\"\n          position: absolute;\n          top: 70%;\n          right: 20%;\n          width: 30px;\n          height: 30px;\n          background: #333;\n          border-radius: 50%;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: white;\n          font-weight: bold;\n          box-shadow: 0 2px 10px rgba(0,0,0,0.3);\n          z-index: 2;\n        \">üè†</div>\n        \n        <div id=\"driver-marker\" style=\"\n          position: absolute;\n          top: 50%;\n          left: 50%;\n          width: 40px;\n          height: 40px;\n          background: #FF5722;\n          border-radius: 50%;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: white;\n          font-weight: bold;\n          box-shadow: 0 4px 15px rgba(255,87,34,0.4);\n          z-index: 3;\n          animation: pulse 2s infinite;\n        \">üöó</div>\n        \n        <div style=\"\n          position: absolute;\n          top: 10px;\n          left: 10px;\n          background: rgba(255,255,255,0.9);\n          padding: 10px;\n          border-radius: 8px;\n          font-size: 12px;\n          box-shadow: 0 2px 10px rgba(0,0,0,0.1);\n        \">\n          <div style=\"margin-bottom: 5px;\">\n            <span style=\"color: #4CAF50;\">‚óè</span> Pickup: ${request.pickupLocation.address}\n          </div>\n          <div>\n            <span style=\"color: #333;\">‚óè</span> Delivery: ${request.deliveryLocation.address}\n          </div>\n        </div>\n        \n        <div id=\"driver-info\" style=\"\n          position: absolute;\n          bottom: 10px;\n          left: 10px;\n          right: 10px;\n          background: rgba(255,255,255,0.95);\n          padding: 15px;\n          border-radius: 10px;\n          box-shadow: 0 4px 15px rgba(0,0,0,0.1);\n        \">\n          <div style=\"display: flex; align-items: center; gap: 10px;\">\n            <div style=\"\n              width: 40px;\n              height: 40px;\n              background: #4CAF50;\n              border-radius: 50%;\n              display: flex;\n              align-items: center;\n              justify-content: center;\n              color: white;\n              font-weight: bold;\n            \">${request.driverId?.name?.charAt(0) || 'D'}</div>\n            <div style=\"flex: 1;\">\n              <div style=\"font-weight: bold; margin-bottom: 2px;\">${request.driverId?.name || 'Driver'}</div>\n              <div style=\"color: #666; font-size: 12px;\">\n                ${getStatusMessage(request.status)} ‚Ä¢ ‚≠ê ${request.driverId?.rating?.toFixed(1) || '5.0'}\n              </div>\n            </div>\n            <div style=\"text-align: right;\">\n              <div style=\"font-size: 18px; font-weight: bold; color: #4CAF50;\">${request.price} MAD</div>\n              <div style=\"font-size: 12px; color: #666;\">\n                ${request.status === 'delivering' ? 'Arriving' : 'Fee'}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      <style>\n        @keyframes pulse {\n          0% { transform: scale(1); }\n          50% { transform: scale(1.1); }\n          100% { transform: scale(1); }\n        }\n      </style>\n    `;\n  };\n\n  const updateDriverLocation = (location) => {\n    const driverMarker = document.getElementById('driver-marker');\n    if (driverMarker && location) {\n      // Simulate movement on the visual map\n      const randomX = Math.random() * 80 + 10; // 10% to 90%\n      const randomY = Math.random() * 80 + 10; // 10% to 90%\n      \n      driverMarker.style.left = randomX + '%';\n      driverMarker.style.top = randomY + '%';\n      \n      // Add movement animation\n      driverMarker.style.transition = 'all 1s ease-in-out';\n      \n      console.log('üöó Driver location updated:', location);\n    }\n  };\n\n  const getStatusMessage = (status) => {\n    const messages = {\n      pending: 'Looking for driver...',\n      accepted: 'Going to store',\n      shopping: 'Shopping for items',\n      delivering: 'On the way to you',\n      completed: 'Delivered!',\n      cancelled: 'Cancelled'\n    };\n    return messages[status] || status;\n  };\n\n  return (\n    <div \n      ref={mapRef}\n      style={{\n        width: '100%',\n        height: '400px',\n        border: '2px solid #e0e0e0',\n        borderRadius: '15px',\n        position: 'relative',\n        overflow: 'hidden'\n      }}\n    />\n  );\n};\n\nexport default LiveTrackingMap;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AAC1D,OAAOC,EAAE,MAAM,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAElC,MAAMC,eAAe,GAAGA,CAAC;EAAEC,OAAO;EAAEC;AAAK,CAAC,KAAK;EAAAC,EAAA;EAC7C,MAAMC,MAAM,GAAGT,MAAM,CAAC,IAAI,CAAC;EAC3B,MAAM,CAACU,GAAG,EAAEC,MAAM,CAAC,GAAGV,QAAQ,CAAC,IAAI,CAAC;EACpC,MAAM,CAACW,YAAY,EAAEC,eAAe,CAAC,GAAGZ,QAAQ,CAAC,IAAI,CAAC;EACtD,MAAM,CAACa,YAAY,EAAEC,eAAe,CAAC,GAAGd,QAAQ,CAAC,IAAI,CAAC;EACtD,MAAM,CAACe,cAAc,EAAEC,iBAAiB,CAAC,GAAGhB,QAAQ,CAAC,IAAI,CAAC;EAC1D,MAAM,CAACiB,MAAM,EAAEC,SAAS,CAAC,GAAGlB,QAAQ,CAAC,IAAI,CAAC;EAE1CF,SAAS,CAAC,MAAM;IACd;IACA,MAAMqB,SAAS,GAAGlB,EAAE,CAAC,uBAAuB,CAAC;IAC7CiB,SAAS,CAACC,SAAS,CAAC;;IAEpB;IACAA,SAAS,CAACC,IAAI,CAAC,WAAW,EAAEf,OAAO,CAACgB,GAAG,CAAC;;IAExC;IACAF,SAAS,CAACG,EAAE,CAAC,wBAAwB,EAAGC,IAAI,IAAK;MAC/C,IAAIA,IAAI,CAACC,SAAS,KAAKnB,OAAO,CAACgB,GAAG,EAAE;QAClCI,oBAAoB,CAACF,IAAI,CAACG,QAAQ,CAAC;MACrC;IACF,CAAC,CAAC;IAEF,OAAO,MAAM;MACXP,SAAS,CAACQ,UAAU,CAAC,CAAC;IACxB,CAAC;EACH,CAAC,EAAE,CAACtB,OAAO,CAACgB,GAAG,CAAC,CAAC;EAEjBvB,SAAS,CAAC,MAAM;IACd8B,aAAa,CAAC,CAAC;EACjB,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMA,aAAa,GAAGA,CAAA,KAAM;IAAA,IAAAC,iBAAA,EAAAC,qBAAA,EAAAC,kBAAA,EAAAC,kBAAA,EAAAC,qBAAA;IAC1B;IACA;IACA,MAAMC,YAAY,GAAG1B,MAAM,CAAC2B,OAAO;;IAEnC;IACAD,YAAY,CAACE,SAAS,GAAG;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D/B,OAAO,CAACgC,cAAc,CAACC,OAAO;AAC3F;AACA;AACA,4DAA4DjC,OAAO,CAACkC,gBAAgB,CAACD,OAAO;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,EAAAT,iBAAA,GAAAxB,OAAO,CAACmC,QAAQ,cAAAX,iBAAA,wBAAAC,qBAAA,GAAhBD,iBAAA,CAAkBY,IAAI,cAAAX,qBAAA,uBAAtBA,qBAAA,CAAwBY,MAAM,CAAC,CAAC,CAAC,KAAI,GAAG;AACxD;AACA,oEAAoE,EAAAX,kBAAA,GAAA1B,OAAO,CAACmC,QAAQ,cAAAT,kBAAA,uBAAhBA,kBAAA,CAAkBU,IAAI,KAAI,QAAQ;AACtG;AACA,kBAAkBE,gBAAgB,CAACtC,OAAO,CAACuC,MAAM,CAAC,QAAQ,EAAAZ,kBAAA,GAAA3B,OAAO,CAACmC,QAAQ,cAAAR,kBAAA,wBAAAC,qBAAA,GAAhBD,kBAAA,CAAkBa,MAAM,cAAAZ,qBAAA,uBAAxBA,qBAAA,CAA0Ba,OAAO,CAAC,CAAC,CAAC,KAAI,KAAK;AACvG;AACA;AACA;AACA,iFAAiFzC,OAAO,CAAC0C,KAAK;AAC9F;AACA,kBAAkB1C,OAAO,CAACuC,MAAM,KAAK,YAAY,GAAG,UAAU,GAAG,KAAK;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;EACH,CAAC;EAED,MAAMnB,oBAAoB,GAAIC,QAAQ,IAAK;IACzC,MAAMf,YAAY,GAAGqC,QAAQ,CAACC,cAAc,CAAC,eAAe,CAAC;IAC7D,IAAItC,YAAY,IAAIe,QAAQ,EAAE;MAC5B;MACA,MAAMwB,OAAO,GAAGC,IAAI,CAACC,MAAM,CAAC,CAAC,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC;MACzC,MAAMC,OAAO,GAAGF,IAAI,CAACC,MAAM,CAAC,CAAC,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC;;MAEzCzC,YAAY,CAAC2C,KAAK,CAACC,IAAI,GAAGL,OAAO,GAAG,GAAG;MACvCvC,YAAY,CAAC2C,KAAK,CAACE,GAAG,GAAGH,OAAO,GAAG,GAAG;;MAEtC;MACA1C,YAAY,CAAC2C,KAAK,CAACG,UAAU,GAAG,oBAAoB;MAEpDC,OAAO,CAACC,GAAG,CAAC,6BAA6B,EAAEjC,QAAQ,CAAC;IACtD;EACF,CAAC;EAED,MAAMiB,gBAAgB,GAAIC,MAAM,IAAK;IACnC,MAAMgB,QAAQ,GAAG;MACfC,OAAO,EAAE,uBAAuB;MAChCC,QAAQ,EAAE,gBAAgB;MAC1BC,QAAQ,EAAE,oBAAoB;MAC9BC,UAAU,EAAE,mBAAmB;MAC/BC,SAAS,EAAE,YAAY;MACvBC,SAAS,EAAE;IACb,CAAC;IACD,OAAON,QAAQ,CAAChB,MAAM,CAAC,IAAIA,MAAM;EACnC,CAAC;EAED,oBACEzC,OAAA;IACEgE,GAAG,EAAE3D,MAAO;IACZ8C,KAAK,EAAE;MACLc,KAAK,EAAE,MAAM;MACbC,MAAM,EAAE,OAAO;MACfC,MAAM,EAAE,mBAAmB;MAC3BC,YAAY,EAAE,MAAM;MACpBC,QAAQ,EAAE,UAAU;MACpBC,QAAQ,EAAE;IACZ;EAAE;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEN,CAAC;AAACtE,EAAA,CApNIH,eAAe;AAAA0E,EAAA,GAAf1E,eAAe;AAsNrB,eAAeA,eAAe;AAAC,IAAA0E,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}