{"ast":null,"code":"import axios from 'axios';\nconst API_URL = 'http://localhost:5000/api';\nexport class LocationTracker {\n  constructor(userId) {\n    this.userId = userId;\n    this.watchId = null;\n    this.isTracking = false;\n  }\n  startTracking() {\n    if (!navigator.geolocation) {\n      console.error('Geolocation not supported');\n      return;\n    }\n    this.isTracking = true;\n    const options = {\n      enableHighAccuracy: true,\n      timeout: 10000,\n      maximumAge: 30000\n    };\n    this.watchId = navigator.geolocation.watchPosition(position => {\n      this.updateLocation(position.coords.latitude, position.coords.longitude);\n    }, error => {\n      console.error('Location error:', error);\n    }, options);\n  }\n  stopTracking() {\n    if (this.watchId) {\n      navigator.geolocation.clearWatch(this.watchId);\n      this.watchId = null;\n    }\n    this.isTracking = false;\n  }\n  async updateLocation(latitude, longitude) {\n    try {\n      const token = localStorage.getItem('token');\n      await axios.patch(`${API_URL}/users/${this.userId}/location`, {\n        latitude,\n        longitude,\n        address: `${latitude.toFixed(4)}, ${longitude.toFixed(4)}`\n      }, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n    } catch (error) {\n      console.error('Failed to update location:', error);\n    }\n  }\n  async getCurrentLocation() {\n    return new Promise((resolve, reject) => {\n      navigator.geolocation.getCurrentPosition(position => {\n        resolve({\n          latitude: position.coords.latitude,\n          longitude: position.coords.longitude\n        });\n      }, error => reject(error), {\n        enableHighAccuracy: true,\n        timeout: 10000\n      });\n    });\n  }\n}\nexport default LocationTracker;","map":{"version":3,"names":["axios","API_URL","LocationTracker","constructor","userId","watchId","isTracking","startTracking","navigator","geolocation","console","error","options","enableHighAccuracy","timeout","maximumAge","watchPosition","position","updateLocation","coords","latitude","longitude","stopTracking","clearWatch","token","localStorage","getItem","patch","address","toFixed","headers","Authorization","getCurrentLocation","Promise","resolve","reject","getCurrentPosition"],"sources":["C:/Users/LENOVO LEGION 7/delivery-connect/frontend/src/utils/locationTracker.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_URL = 'http://localhost:5000/api';\n\nexport class LocationTracker {\n  constructor(userId) {\n    this.userId = userId;\n    this.watchId = null;\n    this.isTracking = false;\n  }\n\n  startTracking() {\n    if (!navigator.geolocation) {\n      console.error('Geolocation not supported');\n      return;\n    }\n\n    this.isTracking = true;\n    \n    const options = {\n      enableHighAccuracy: true,\n      timeout: 10000,\n      maximumAge: 30000\n    };\n\n    this.watchId = navigator.geolocation.watchPosition(\n      (position) => {\n        this.updateLocation(position.coords.latitude, position.coords.longitude);\n      },\n      (error) => {\n        console.error('Location error:', error);\n      },\n      options\n    );\n  }\n\n  stopTracking() {\n    if (this.watchId) {\n      navigator.geolocation.clearWatch(this.watchId);\n      this.watchId = null;\n    }\n    this.isTracking = false;\n  }\n\n  async updateLocation(latitude, longitude) {\n    try {\n      const token = localStorage.getItem('token');\n      await axios.patch(`${API_URL}/users/${this.userId}/location`, {\n        latitude,\n        longitude,\n        address: `${latitude.toFixed(4)}, ${longitude.toFixed(4)}`\n      }, {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n    } catch (error) {\n      console.error('Failed to update location:', error);\n    }\n  }\n\n  async getCurrentLocation() {\n    return new Promise((resolve, reject) => {\n      navigator.geolocation.getCurrentPosition(\n        (position) => {\n          resolve({\n            latitude: position.coords.latitude,\n            longitude: position.coords.longitude\n          });\n        },\n        (error) => reject(error),\n        { enableHighAccuracy: true, timeout: 10000 }\n      );\n    });\n  }\n}\n\nexport default LocationTracker;"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,OAAO,GAAG,2BAA2B;AAE3C,OAAO,MAAMC,eAAe,CAAC;EAC3BC,WAAWA,CAACC,MAAM,EAAE;IAClB,IAAI,CAACA,MAAM,GAAGA,MAAM;IACpB,IAAI,CAACC,OAAO,GAAG,IAAI;IACnB,IAAI,CAACC,UAAU,GAAG,KAAK;EACzB;EAEAC,aAAaA,CAAA,EAAG;IACd,IAAI,CAACC,SAAS,CAACC,WAAW,EAAE;MAC1BC,OAAO,CAACC,KAAK,CAAC,2BAA2B,CAAC;MAC1C;IACF;IAEA,IAAI,CAACL,UAAU,GAAG,IAAI;IAEtB,MAAMM,OAAO,GAAG;MACdC,kBAAkB,EAAE,IAAI;MACxBC,OAAO,EAAE,KAAK;MACdC,UAAU,EAAE;IACd,CAAC;IAED,IAAI,CAACV,OAAO,GAAGG,SAAS,CAACC,WAAW,CAACO,aAAa,CAC/CC,QAAQ,IAAK;MACZ,IAAI,CAACC,cAAc,CAACD,QAAQ,CAACE,MAAM,CAACC,QAAQ,EAAEH,QAAQ,CAACE,MAAM,CAACE,SAAS,CAAC;IAC1E,CAAC,EACAV,KAAK,IAAK;MACTD,OAAO,CAACC,KAAK,CAAC,iBAAiB,EAAEA,KAAK,CAAC;IACzC,CAAC,EACDC,OACF,CAAC;EACH;EAEAU,YAAYA,CAAA,EAAG;IACb,IAAI,IAAI,CAACjB,OAAO,EAAE;MAChBG,SAAS,CAACC,WAAW,CAACc,UAAU,CAAC,IAAI,CAAClB,OAAO,CAAC;MAC9C,IAAI,CAACA,OAAO,GAAG,IAAI;IACrB;IACA,IAAI,CAACC,UAAU,GAAG,KAAK;EACzB;EAEA,MAAMY,cAAcA,CAACE,QAAQ,EAAEC,SAAS,EAAE;IACxC,IAAI;MACF,MAAMG,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;MAC3C,MAAM1B,KAAK,CAAC2B,KAAK,CAAC,GAAG1B,OAAO,UAAU,IAAI,CAACG,MAAM,WAAW,EAAE;QAC5DgB,QAAQ;QACRC,SAAS;QACTO,OAAO,EAAE,GAAGR,QAAQ,CAACS,OAAO,CAAC,CAAC,CAAC,KAAKR,SAAS,CAACQ,OAAO,CAAC,CAAC,CAAC;MAC1D,CAAC,EAAE;QACDC,OAAO,EAAE;UAAEC,aAAa,EAAE,UAAUP,KAAK;QAAG;MAC9C,CAAC,CAAC;IACJ,CAAC,CAAC,OAAOb,KAAK,EAAE;MACdD,OAAO,CAACC,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAAC;IACpD;EACF;EAEA,MAAMqB,kBAAkBA,CAAA,EAAG;IACzB,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;MACtC3B,SAAS,CAACC,WAAW,CAAC2B,kBAAkB,CACrCnB,QAAQ,IAAK;QACZiB,OAAO,CAAC;UACNd,QAAQ,EAAEH,QAAQ,CAACE,MAAM,CAACC,QAAQ;UAClCC,SAAS,EAAEJ,QAAQ,CAACE,MAAM,CAACE;QAC7B,CAAC,CAAC;MACJ,CAAC,EACAV,KAAK,IAAKwB,MAAM,CAACxB,KAAK,CAAC,EACxB;QAAEE,kBAAkB,EAAE,IAAI;QAAEC,OAAO,EAAE;MAAM,CAC7C,CAAC;IACH,CAAC,CAAC;EACJ;AACF;AAEA,eAAeZ,eAAe","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}