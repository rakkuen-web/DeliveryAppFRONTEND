{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\LENOVO LEGION 7\\\\delivery-connect\\\\frontend\\\\src\\\\components\\\\DriverLocationSharer.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport io from 'socket.io-client';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DriverLocationSharer = ({\n  user,\n  activeDelivery\n}) => {\n  _s();\n  const [socket, setSocket] = useState(null);\n  const [isSharing, setIsSharing] = useState(false);\n  const [currentLocation, setCurrentLocation] = useState(null);\n  useEffect(() => {\n    if ((user === null || user === void 0 ? void 0 : user.userType) === 'driver' && activeDelivery) {\n      const newSocket = io('http://localhost:5000');\n      setSocket(newSocket);\n      startLocationSharing();\n      return () => {\n        newSocket.disconnect();\n        stopLocationSharing();\n      };\n    }\n  }, [user, activeDelivery]);\n  const startLocationSharing = () => {\n    if (navigator.geolocation) {\n      setIsSharing(true);\n      const watchId = navigator.geolocation.watchPosition(position => {\n        const location = {\n          latitude: position.coords.latitude,\n          longitude: position.coords.longitude,\n          address: `Lat: ${position.coords.latitude.toFixed(4)}, Lng: ${position.coords.longitude.toFixed(4)}`,\n          accuracy: position.coords.accuracy\n        };\n        setCurrentLocation(location);\n        if (socket && activeDelivery) {\n          socket.emit('driver-location', {\n            driverId: user._id,\n            location: location,\n            timestamp: new Date().toISOString()\n          });\n        }\n      }, error => {\n        console.error('Location error:', error);\n        setIsSharing(false);\n      }, {\n        enableHighAccuracy: true,\n        timeout: 10000,\n        maximumAge: 5000\n      });\n      return () => {\n        navigator.geolocation.clearWatch(watchId);\n        setIsSharing(false);\n      };\n    }\n  };\n  const stopLocationSharing = () => {\n    setIsSharing(false);\n  };\n  if ((user === null || user === void 0 ? void 0 : user.userType) !== 'driver' || !activeDelivery) {\n    return null;\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      background: isSharing ? '#4CAF50' : '#FF9800',\n      color: 'white',\n      padding: '10px',\n      borderRadius: '8px',\n      margin: '10px 0',\n      textAlign: 'center'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        fontSize: '16px',\n        fontWeight: 'bold',\n        marginBottom: '5px'\n      },\n      children: [\"\\uD83D\\uDCCD Location Sharing: \", isSharing ? 'ON' : 'OFF']\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), currentLocation && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        fontSize: '12px',\n        opacity: 0.9\n      },\n      children: currentLocation.address\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        fontSize: '11px',\n        opacity: 0.8,\n        marginTop: '5px'\n      },\n      children: \"Customer can see your live location\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 5\n  }, this);\n};\n_s(DriverLocationSharer, \"23c97rPX+11J6buijaq8CuCJuzE=\");\n_c = DriverLocationSharer;\nexport default DriverLocationSharer;\nvar _c;\n$RefreshReg$(_c, \"DriverLocationSharer\");","map":{"version":3,"names":["React","useEffect","useState","io","jsxDEV","_jsxDEV","DriverLocationSharer","user","activeDelivery","_s","socket","setSocket","isSharing","setIsSharing","currentLocation","setCurrentLocation","userType","newSocket","startLocationSharing","disconnect","stopLocationSharing","navigator","geolocation","watchId","watchPosition","position","location","latitude","coords","longitude","address","toFixed","accuracy","emit","driverId","_id","timestamp","Date","toISOString","error","console","enableHighAccuracy","timeout","maximumAge","clearWatch","style","background","color","padding","borderRadius","margin","textAlign","children","fontSize","fontWeight","marginBottom","fileName","_jsxFileName","lineNumber","columnNumber","opacity","marginTop","_c","$RefreshReg$"],"sources":["C:/Users/LENOVO LEGION 7/delivery-connect/frontend/src/components/DriverLocationSharer.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport io from 'socket.io-client';\n\nconst DriverLocationSharer = ({ user, activeDelivery }) => {\n  const [socket, setSocket] = useState(null);\n  const [isSharing, setIsSharing] = useState(false);\n  const [currentLocation, setCurrentLocation] = useState(null);\n\n  useEffect(() => {\n    if (user?.userType === 'driver' && activeDelivery) {\n      const newSocket = io('http://localhost:5000');\n      setSocket(newSocket);\n      startLocationSharing();\n\n      return () => {\n        newSocket.disconnect();\n        stopLocationSharing();\n      };\n    }\n  }, [user, activeDelivery]);\n\n  const startLocationSharing = () => {\n    if (navigator.geolocation) {\n      setIsSharing(true);\n      \n      const watchId = navigator.geolocation.watchPosition(\n        (position) => {\n          const location = {\n            latitude: position.coords.latitude,\n            longitude: position.coords.longitude,\n            address: `Lat: ${position.coords.latitude.toFixed(4)}, Lng: ${position.coords.longitude.toFixed(4)}`,\n            accuracy: position.coords.accuracy\n          };\n          \n          setCurrentLocation(location);\n          \n          if (socket && activeDelivery) {\n            socket.emit('driver-location', {\n              driverId: user._id,\n              location: location,\n              timestamp: new Date().toISOString()\n            });\n          }\n        },\n        (error) => {\n          console.error('Location error:', error);\n          setIsSharing(false);\n        },\n        {\n          enableHighAccuracy: true,\n          timeout: 10000,\n          maximumAge: 5000\n        }\n      );\n\n      return () => {\n        navigator.geolocation.clearWatch(watchId);\n        setIsSharing(false);\n      };\n    }\n  };\n\n  const stopLocationSharing = () => {\n    setIsSharing(false);\n  };\n\n  if (user?.userType !== 'driver' || !activeDelivery) {\n    return null;\n  }\n\n  return (\n    <div style={{\n      background: isSharing ? '#4CAF50' : '#FF9800',\n      color: 'white',\n      padding: '10px',\n      borderRadius: '8px',\n      margin: '10px 0',\n      textAlign: 'center'\n    }}>\n      <div style={{ fontSize: '16px', fontWeight: 'bold', marginBottom: '5px' }}>\n        üìç Location Sharing: {isSharing ? 'ON' : 'OFF'}\n      </div>\n      {currentLocation && (\n        <div style={{ fontSize: '12px', opacity: 0.9 }}>\n          {currentLocation.address}\n        </div>\n      )}\n      <div style={{ fontSize: '11px', opacity: 0.8, marginTop: '5px' }}>\n        Customer can see your live location\n      </div>\n    </div>\n  );\n};\n\nexport default DriverLocationSharer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}